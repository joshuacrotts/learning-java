\newtcolorbox[auto counter,number within=chapter]{clo}[2][]{
  enhanced,
  colback=white,
  colframe=gray!80!white,
  arc=0mm,
  boxsep=1pt,
    sidebyside,
  sidebyside align=top,
  left=5pt,%      left skip
  right=5pt,%     right skip
  frame hidden,
  attach boxed title to top left,
  boxed title style={
    sharp corners=all,
    colback=white,
    frame hidden,
    leftrule=0pt,
    rightrule=0pt,
    bottomrule=0pt,
    boxsep=0pt,
    top=4pt,
    bottom=4pt,
  },
  borderline north = {0.5pt}{0pt}{black,solid},
  borderline south = {0.5pt}{0pt}{black,solid},
  top=-5pt,
  bottom=-5pt,
  toptitle=1mm,
  bottomtitle=0.7mm,
  lefthand width={0.60\textwidth},
  title={\textcolor{black}{\emph{Listing \thetcbcounter}\ifstrempty{#2}{}{---\emph{#2}}\ifstrempty{#1}{}{~(\texttt{#1})}}}
}

\newtcolorbox[use counter from=clo, number within=chapter]{clohalfast}[2][]{
  enhanced,
  colback=white,
  colframe=gray!80!white,
  arc=0mm,
  boxsep=1pt,
  left=5pt,%      left skip
  right=5pt,%     right skip
  frame hidden,
    sidebyside,
  % toprule=.5pt,
  % rightrule=-0.2pt,
  % bottomrule=1pt,
  % leftrule=-0.2pt,
  sidebyside align=top,
  attach boxed title to top left,
  boxed title style={
    sharp corners=all,
    colback=white,
    frame hidden,
    leftrule=0pt,
    rightrule=0pt,
    bottomrule=0pt,
    boxsep=0pt,
    top=4pt,
    bottom=4pt,
  },
  borderline north = {0.5pt}{0pt}{black,solid},
  borderline south = {0.5pt}{0pt}{black,solid},
  top=-5pt,
  bottom=-5pt,
  toptitle=1mm,
  bottomtitle=0.7mm,
  lefthand width={0.525\textwidth},
  title={\textcolor{black}{\emph{Listing \thetcbcounter}\ifstrempty{#2}{}{---\emph{#2}}\ifstrempty{#1}{}{~(\texttt{#1})}}}
}

\newtcolorbox[use counter from=clo, number within=chapter]{clonarrow}[2][]{
  enhanced,
  colback=white,
  colframe=gray!80!white,
  arc=0mm,
  boxsep=1pt,
  left=5pt,%      left skip
  right=5pt,%     right skip
  % toprule=.5pt,
  % rightrule=-0.2pt,
  % bottomrule=1pt,
  % leftrule=-0.2pt,
  sidebyside,
  sidebyside align=top,
  frame hidden,
  attach boxed title to top left,
  boxed title style={
    sharp corners=all,
    colback=white,
    frame hidden,
    leftrule=0pt,
    rightrule=0pt,
    bottomrule=0pt,
    boxsep=0pt,
    top=4pt,
    bottom=4pt,
  },
  borderline north = {0.5pt}{0pt}{black,solid},
  borderline south = {0.5pt}{0pt}{black,solid},
  top=-5pt,
  bottom=-5pt,
  toptitle=1mm,
  bottomtitle=0.7mm,
  lefthand width={0.65\textwidth},
  title={\textcolor{black}{\emph{Listing \thetcbcounter}\ifstrempty{#2}{}{---\emph{#2}}\ifstrempty{#1}{}{~(\texttt{#1})}}}
}

\newtcolorbox[use counter from=clo, number within=chapter]{cloverynarrow}[2][]{
  enhanced,
  colback=white,
  colframe=gray!80!white,
  arc=0mm,
  boxsep=1pt,
  sidebyside,
  sidebyside align=top,
  left=5pt,%      left skip
  right=5pt,%     right skip
  frame hidden,
  attach boxed title to top left,
  boxed title style={
    sharp corners=all,
    colback=white,
    frame hidden,
    leftrule=0pt,
    rightrule=0pt,
    bottomrule=0pt,
    boxsep=0pt,
    top=4pt,
    bottom=4pt,
  },
  borderline north = {0.5pt}{0pt}{black,solid},
  borderline south = {0.5pt}{0pt}{black,solid},
  top=-5pt,
  bottom=-5pt,
  toptitle=1mm,
  bottomtitle=0.7mm,
  lefthand width={0.80\textwidth},
  title={\textcolor{black}{\emph{Listing \thetcbcounter}\ifstrempty{#2}{}{---\emph{#2}}\ifstrempty{#1}{}{~(\texttt{#1})}}}
}

\newtcolorbox[use counter from=clo,number within=chapter]{cloast}[2][]{
  enhanced,
  colback=white,
  colframe=gray!80!white,
  arc=0mm,
  boxsep=1pt,
  sidebyside,
  sidebyside align=top,
  sidebyside gap=14pt,
  lefthand width={0.46\textwidth},
  left=5pt,%      left skip
  right=5pt,%     right skip
  frame hidden,
  attach boxed title to top left,
  boxed title style={
    sharp corners=all,
    colback=white,
    frame hidden,
    leftrule=0pt,
    rightrule=0pt,
    bottomrule=0pt,
    boxsep=0pt,
    top=4pt,
    bottom=4pt,
  },
  borderline north = {0.5pt}{0pt}{black,solid},
  borderline south = {0.5pt}{0pt}{black,solid},
  top=-5pt,
  bottom=-5pt,
  toptitle=1mm,
  bottomtitle=0.7mm,
  title={\textcolor{black}{\emph{Listing \thetcbcounter}\ifstrempty{#2}{}{---\emph{#2}}\ifstrempty{#1}{}{~(\texttt{#1})}}}
}

\newtcolorbox[use counter from=clo,number within=chapter]{clobigast}[2][]{
  enhanced,
  colback=white,
  colframe=gray!80!white,
  arc=0mm,
  boxsep=1pt,
  sidebyside,
  sidebyside align=top,
  left=5pt,%      left skip
  right=5pt,%     right skip
  frame hidden,
  attach boxed title to top left,
  boxed title style={
    sharp corners=all,
    colback=white,
    frame hidden,
    leftrule=0pt,
    rightrule=0pt,
    bottomrule=0pt,
    boxsep=0pt,
    top=4pt,
    bottom=4pt,
  },
  borderline north = {0.5pt}{0pt}{black,solid},
  borderline south = {0.5pt}{0pt}{black,solid},
  top=-5pt,
  bottom=-5pt,
  toptitle=1mm,
  bottomtitle=0.7mm,
  lefthand width={0.35\textwidth},
  title={\textcolor{black}{\emph{Listing \thetcbcounter}\ifstrempty{#2}{}{---\emph{#2}}\ifstrempty{#1}{}{~(\texttt{#1})}}}
}

\newtcolorbox[use counter from=clo,number within=chapter]{cloverywide}[2][]{
  enhanced,
  colback=white,
  colframe=gray!80!white,
  arc=0mm,
  boxsep=1pt,
  sidebyside,
  sidebyside align=top,
  left=5pt,%      left skip
  right=5pt,%     right skip
  frame hidden,
  attach boxed title to top left,
  boxed title style={
    sharp corners=all,
    colback=white,
    frame hidden,
    leftrule=0pt,
    rightrule=0pt,
    bottomrule=0pt,
    boxsep=0pt,
    top=4pt,
    bottom=4pt,
  },
  borderline north = {0.5pt}{0pt}{black,solid},
  borderline south = {0.5pt}{0pt}{black,solid},
  top=-5pt,
  bottom=-5pt,
  toptitle=1mm,
  bottomtitle=0.7mm,
  lefthand width={0.20\textwidth},
  title={\textcolor{black}{\emph{Listing \thetcbcounter}\ifstrempty{#2}{}{---\emph{#2}}\ifstrempty{#1}{}{~(\texttt{#1})}}}
}

% recognizer-reducer pair
\newtcolorbox[use counter from=clo, number within=chapter]{clrr}[2][]{
  enhanced,
  colback=white,
  colframe=black,
  arc=0mm,
  boxsep=1pt,
  left=5pt,%      left skip
  right=5pt,%     right skip
  frame hidden,
  sidebyside,
  sidebyside gap=14pt,
  segmentation style=solid,
  sidebyside align=top,
  attach boxed title to top left,
  boxed title style={
    sharp corners=all,
    colback=white,
    frame hidden,
    leftrule=0pt,
    rightrule=0pt,
    bottomrule=0pt,
    boxsep=0pt,
    top=4pt,
    bottom=4pt,
  },
  borderline north = {0.5pt}{0pt}{black,solid},
  borderline south = {0.5pt}{0pt}{black,solid},
  top=-5pt,
  bottom=-5pt,
  toptitle=1mm,
  bottomtitle=0.7mm,
  lefthand width={0.46\textwidth}
  % title={\textcolor{black}{\emph{Listing \thetcbcounter}\ifstrempty{#2}{}{---\emph{#2}}\ifstrempty{#1}{}{~(\texttt{#1})}}}
}

% Code Listing (JUST a code listing; no output or anything).
\newtcolorbox[use counter from=cloast,number within=chapter]{cl}[2][]{
  enhanced,
  colback=white,
  colframe=gray!10!white,
  breakable,
  arc=0mm,
  boxsep=1pt,
  left=5pt,%      left skip
  right=5pt,%     right skip
  frame hidden,
  attach boxed title to top left,
  boxed title style={
    sharp corners=all,
    colback=white,
    frame hidden,
    leftrule=0pt,
    rightrule=0pt,
    bottomrule=0pt,
    boxsep=0pt,
    top=4pt,
    bottom=4pt,
  },
  borderline north = {0.5pt}{0pt}{black,solid},
  borderline south = {0.5pt}{0pt}{black,solid},
  top=-5pt,
  bottom=-5pt,
  toptitle=1mm,
  bottomtitle=0.7mm,
  title={\textcolor{black}{\emph{Listing \thetcbcounter}\ifstrempty{#2}{}{---\emph{#2}}}}
}

% BREAKABLE code listing - usually only for very, VERY long listings.
\newtcolorbox[use counter from=cloast,number within=chapter]{clbreakable}[2][]{
  enhanced,
  breakable,
  colback=white,
  colframe=gray!10!white,
  arc=0mm,
  boxsep=1pt,
  left=5pt,%      left skip
  right=5pt,%     right skip
  frame hidden,
  attach boxed title to top left,
  boxed title style={
    sharp corners=all,
    colback=white,
    frame hidden,
    leftrule=0pt,
    rightrule=0pt,
    bottomrule=0pt,
    boxsep=0pt,
    top=4pt,
    bottom=4pt,
  },
  borderline north = {0.5pt}{0pt}{black,solid},
  borderline south = {0.5pt}{0pt}{black,solid},
  top=-5pt,
  bottom=-5pt,
  toptitle=1mm,
  bottomtitle=0.7mm,
  title={\textcolor{black}{\emph{Listing \thetcbcounter}\ifstrempty{#2}{}{---\emph{#2}}\ifstrempty{#1}{}{~(\texttt{#1})}}}
}
